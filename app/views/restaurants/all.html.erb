<div class='name-form'>
	<%= form_tag restaurants_path, method: :get, authentication: false, id: 'search-form' do %>
		<%= text_field_tag :search, params[:search] %>
		<%= submit_tag "Refine Search", class: 'button tiny' %>
	<% end %>
</div>

<div id='restaurants-all'>
	<%= render @restaurants %>
</div>

<script type='text/javascript'>
	function display_search_results() {
		if (this.readyState === 4) {
			console.log(this);
			document.getElementById('restaurants-all').innerHTML = this.responseText;
		}
	}

	var form = document.getElementById('search-form');
	form.addEventListener('submit', function(event) {
		event.preventDefault();
		var searchValue = document.getElementById('search').value;

		var xhr = new XMLHttpRequest();
		xhr.onload = display_search_results;
		xhr.open('GET', '/restaurants/all?search=' + searchValue, true);
		xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
		xhr.send();
	});
	
</script>